"use strict";(self["webpackChunkfirst_project_personal"]=self["webpackChunkfirst_project_personal"]||[]).push([[43],{9944:function(e,t,a){a.d(t,{Z:function(){return c}});var o=a(3396),n=a(9242);const s=e=>((0,o.dD)("data-v-29b141ad"),e=e(),(0,o.Cn)(),e),i=s((()=>(0,o._)("h2",null,"Добавить пост",-1)));function p(e,t,a,s,p,r){const l=(0,o.up)("my-input"),g=(0,o.up)("my-button"),c=(0,o.Q2)("focus");return(0,o.wg)(),(0,o.iD)(o.HY,null,[i,(0,o._)("form",{onSubmit:t[2]||(t[2]=(0,n.iM)((()=>{}),["prevent"])),class:"form"},[(0,o.wy)((0,o.Wm)(l,{modelValue:p.post.title,"onUpdate:modelValue":t[0]||(t[0]=e=>p.post.title=e),placeholder:"Название поста"},null,8,["modelValue"]),[[c]]),(0,o.Wm)(l,{modelValue:p.post.body,"onUpdate:modelValue":t[1]||(t[1]=e=>p.post.body=e),placeholder:"Описание поста"},null,8,["modelValue"]),(0,o.Wm)(g,{class:"form__button button--dark",onClick:r.createPost},{default:(0,o.w5)((()=>[(0,o.Uk)("Добавить пост")])),_:1},8,["onClick"])],32)],64)}var r={emits:["create"],data(){return{post:{title:"",body:""}}},methods:{createPost(){this.post.id=Date.now(),this.$emit("create",this.post),this.post={title:"",body:""}}}},l=a(89);const g=(0,l.Z)(r,[["render",p],["__scopeId","data-v-29b141ad"]]);var c=g},2868:function(e,t,a){a.d(t,{Z:function(){return L}});var o=a(3396),n=a(9242);const s={key:1,class:"posts-container"},i={class:"posts"},p={key:3,class:"empty-title"};function r(e,t,a,r,l,g){const c=(0,o.up)("my-loader"),u=(0,o.up)("post-item"),d=(0,o.up)("my-pagination");return(0,o.wg)(),(0,o.iD)(o.HY,null,[a.isLoading?((0,o.wg)(),(0,o.j4)(c,{key:0,class:"posts-loader"})):(0,o.kq)("",!0),a.posts.length>0&&!a.isLoading?((0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",i,[(0,o.Wm)(n.W3,{name:"posts-list"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.posts,(t=>((0,o.wg)(),(0,o.j4)(u,{class:"posts-list-item",onRemovePost:a=>e.$emit("removePost",t),key:t.id,post:t},null,8,["onRemovePost","post"])))),128))])),_:1})])])):(0,o.kq)("",!0),a.isLoading||a.posts.length>0?((0,o.wg)(),(0,o.j4)(d,{key:2,onChangePage:t[0]||(t[0]=t=>e.$emit("changePage",t)),onChangePerPage:t[1]||(t[1]=t=>e.$emit("changePerPage",t)),onChangePaginationType:t[2]||(t[2]=t=>e.$emit("changePaginationType")),pagination:a.pagination},null,8,["pagination"])):(0,o.kq)("",!0),0!==a.posts.length||a.isLoading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",p," Ничего не найдено... "))],64)}var l=a(8152),g=a(7139);const c=e=>((0,o.dD)("data-v-9f708c64"),e=e(),(0,o.Cn)(),e),u={ref:"root"},d={class:"pagination"},h={class:"pagination__items"},m={class:"pagination__controls"},y=c((()=>(0,o._)("div",{class:"pagination__text"},"Выводить на странице:",-1))),P={class:"observer"};function v(e,t,a,s,i,p){const r=(0,o.up)("my-button"),l=(0,o.up)("my-select");return(0,o.wg)(),(0,o.iD)("div",u,[(0,o.wy)((0,o._)("div",d,[(0,o._)("div",h,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.pagination.max,(t=>((0,o.wg)(),(0,o.j4)(r,{key:t,class:(0,g.C_)(["pagination__item",{current:t==a.pagination.current}]),onClick:a=>e.$emit("changePage",t)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(t),1)])),_:2},1032,["class","onClick"])))),128)),(0,o._)("div",m,[y,(0,o.Wm)(l,{onChange:t[0]||(t[0]=t=>e.$emit("changePerPage",i.perPage)),modelValue:i.perPage,"onUpdate:modelValue":t[1]||(t[1]=e=>i.perPage=e),options:i.perPageValues,defaultOption:!1},null,8,["modelValue","options"])])]),"by page"==a.pagination.type?((0,o.wg)(),(0,o.j4)(r,{key:0,onClick:t[2]||(t[2]=t=>e.$emit("changePaginationType")),class:"pagination__load-more"},{default:(0,o.w5)((()=>[(0,o.Uk)("Показать больше")])),_:1})):(0,o.kq)("",!0),(0,o.wy)((0,o._)("div",P,null,512),[[n.F8,"endless tape"==a.pagination.type]])],512),[[n.F8,a.pagination.max>0]])],512)}var _=a(2718),f=a(9422),w=a(4870),b={components:{MySelect:f.Z,MyButton:_.Z},data(){return{perPageValues:[{value:"10",name:"10"},{value:"15",name:"15"},{value:"20",name:"20"},{value:"25",name:"25"},{value:"30",name:"30"},{value:"40",name:"40"},{value:"50",name:"50"}],perPage:"10"}},emits:["changePage","changePerPage","changePaginationType"],props:{pagination:{type:Object,required:!0}},setup(){const e=(0,w.iH)(null);return{root:e}},computed:{paginationType(){return this.pagination.type}},watch:{paginationType(e){const t={rootMargin:"0px",threshold:1},a=(e,t)=>{e[0].isIntersecting&&this.pagination.current<this.pagination.max&&this.$emit("changePage","loadMore")},o=new IntersectionObserver(a,t);"endless tape"==e?o.observe(this.root.querySelector(".observer")):o.disconnect()}}},k=a(89);const C=(0,k.Z)(b,[["render",v],["__scopeId","data-v-9f708c64"]]);var T=C,V={emits:["removePost","changePage","changePerPage","changePaginationType"],components:{PostItem:l.Z,MyPagination:T},props:{posts:{type:Array,required:!0},pagination:{type:Object,required:!1},isLoading:{type:Boolean,default:!1}},data(){return{flag:!1}}};const S=(0,k.Z)(V,[["render",r],["__scopeId","data-v-4a134daa"]]);var L=S},2244:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var o=a(3396);const n=e=>((0,o.dD)("data-v-26cebb59"),e=e(),(0,o.Cn)(),e),s={class:"posts-container-header"},i=n((()=>(0,o._)("h1",null,"Список постов",-1)));function p(e,t,a,n,p,r){const l=(0,o.up)("my-button"),g=(0,o.up)("my-input"),c=(0,o.up)("my-select"),u=(0,o.up)("post-list"),d=(0,o.up)("post-form"),h=(0,o.up)("modal-window");return(0,o.wg)(),(0,o.iD)("main",null,[(0,o.Wm)(l,{onClick:t[0]||(t[0]=e=>p.showModal=!0)},{default:(0,o.w5)((()=>[(0,o.Uk)("Создать новый пост")])),_:1}),(0,o.Wm)(g,{modelValue:p.serachQuery,"onUpdate:modelValue":t[1]||(t[1]=e=>p.serachQuery=e),class:"search-input",placeholder:"Поиск..."},null,8,["modelValue"]),(0,o._)("div",s,[i,(0,o.Wm)(c,{modelValue:p.currentSortType,"onUpdate:modelValue":t[2]||(t[2]=e=>p.currentSortType=e),options:p.sortTypes},null,8,["modelValue","options"])]),(0,o.Wm)(u,{onRemovePost:r.removePost,onChangePage:r.changePage,onChangePerPage:r.changePerPage,onChangePaginationType:r.changePaginationType,posts:r.postSortedAndSearched,pagination:p.pagination,isLoading:p.isPostLoading},null,8,["onRemovePost","onChangePage","onChangePerPage","onChangePaginationType","posts","pagination","isLoading"]),p.showModal?((0,o.wg)(),(0,o.j4)(h,{key:0,onCloseModal:t[3]||(t[3]=e=>p.showModal=!1)},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{onCreate:r.createPost},null,8,["onCreate"])])),_:1})):(0,o.kq)("",!0)])}a(7658);var r=a(9944),l=a(2868),g=a(4311),c={components:{PostList:l.Z,PostForm:r.Z},data(){return{posts:[],isPostLoading:!1,showModal:!1,sortTypes:[{value:"title",name:"По названию"},{value:"body",name:"По содержанию"},{value:"id",name:"По идентификатору"}],currentSortType:"id",serachQuery:"",pagination:{current:1,max:0,type:"by page",posts:{perPage:10,total:0}}}},methods:{createPost(e){this.posts.push(e),this.showModal=!1},removePost(e){this.posts=this.posts.filter((t=>t.id!=e.id))},async fetchPosts(){try{"by page"===this.pagination.type&&(this.posts=[],this.isPostLoading=!0);const e=await g.Z.get("https://jsonplaceholder.typicode.com/posts",{params:{_limit:this.pagination.posts.perPage,_page:this.pagination.current}});"by page"===this.pagination.type?this.posts=e.data:this.posts=[...this.posts,...e.data];let t=this.pagination;t.posts.total=+e.headers["x-total-count"],t.max=Math.ceil(t.posts.total/t.posts.perPage)}catch(e){}finally{this.isPostLoading=!1}},changePage(e){"loadMore"!=e?(this.pagination.type="by page",this.pagination.current=+e):(this.pagination.type="endless tape",this.pagination.current++),this.fetchPosts()},changePerPage(e){this.pagination.type="by page",this.pagination.posts.perPage=+e,this.pagination.current=1,this.fetchPosts()},changePaginationType(){this.pagination.type="endless tape"}},computed:{postSorted(){return this.currentSortType?[...this.posts].sort(((e,t)=>e[this.currentSortType]>t[this.currentSortType]?1:-1)):[...this.posts]},postSortedAndSearched(){return this.serachQuery?this.postSorted.filter((e=>e.title.toLowerCase().includes(this.serachQuery.toLowerCase()))):this.postSorted}},mounted(){this.fetchPosts()}},u=a(89);const d=(0,u.Z)(c,[["render",p],["__scopeId","data-v-26cebb59"]]);var h=d}}]);