"use strict";(self["webpackChunkfirst_project_personal"]=self["webpackChunkfirst_project_personal"]||[]).push([[640],{9944:function(e,t,a){a.d(t,{Z:function(){return c}});var o=a(3396),n=a(9242);const s=e=>((0,o.dD)("data-v-29b141ad"),e=e(),(0,o.Cn)(),e),i=s((()=>(0,o._)("h2",null,"Добавить пост",-1)));function r(e,t,a,s,r,l){const p=(0,o.up)("my-input"),u=(0,o.up)("my-button"),c=(0,o.Q2)("focus");return(0,o.wg)(),(0,o.iD)(o.HY,null,[i,(0,o._)("form",{onSubmit:t[2]||(t[2]=(0,n.iM)((()=>{}),["prevent"])),class:"form"},[(0,o.wy)((0,o.Wm)(p,{modelValue:r.post.title,"onUpdate:modelValue":t[0]||(t[0]=e=>r.post.title=e),placeholder:"Название поста"},null,8,["modelValue"]),[[c]]),(0,o.Wm)(p,{modelValue:r.post.body,"onUpdate:modelValue":t[1]||(t[1]=e=>r.post.body=e),placeholder:"Описание поста"},null,8,["modelValue"]),(0,o.Wm)(u,{class:"form__button button--dark",onClick:l.createPost},{default:(0,o.w5)((()=>[(0,o.Uk)("Добавить пост")])),_:1},8,["onClick"])],32)],64)}var l={emits:["create"],data(){return{post:{title:"",body:""}}},methods:{createPost(){this.post.id=Date.now(),this.$emit("create",this.post),this.post={title:"",body:""}}}},p=a(89);const u=(0,p.Z)(l,[["render",r],["__scopeId","data-v-29b141ad"]]);var c=u},2868:function(e,t,a){a.d(t,{Z:function(){return M}});var o=a(3396),n=a(9242);const s={key:1,class:"posts-container"},i={class:"posts"},r={key:3,class:"empty-title"};function l(e,t,a,l,p,u){const c=(0,o.up)("my-loader"),d=(0,o.up)("post-item"),g=(0,o.up)("my-pagination");return(0,o.wg)(),(0,o.iD)(o.HY,null,[a.isLoading?((0,o.wg)(),(0,o.j4)(c,{key:0,class:"posts-loader"})):(0,o.kq)("",!0),a.posts.length>0&&!a.isLoading?((0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",i,[(0,o.Wm)(n.W3,{name:"posts-list"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.posts,(t=>((0,o.wg)(),(0,o.j4)(d,{class:"posts-list-item",onRemovePost:a=>e.$emit("removePost",t),key:t.id,post:t},null,8,["onRemovePost","post"])))),128))])),_:1})])])):(0,o.kq)("",!0),a.isLoading||a.posts.length>0?((0,o.wg)(),(0,o.j4)(g,{key:2,onChangePage:t[0]||(t[0]=t=>e.$emit("changePage",t)),onChangePerPage:t[1]||(t[1]=t=>e.$emit("changePerPage",t)),onChangePaginationType:t[2]||(t[2]=t=>e.$emit("changePaginationType")),pagination:a.pagination},null,8,["pagination"])):(0,o.kq)("",!0),0!==a.posts.length||a.isLoading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",r," Ничего не найдено... "))],64)}var p=a(8152),u=a(7139);const c=e=>((0,o.dD)("data-v-9f708c64"),e=e(),(0,o.Cn)(),e),d={ref:"root"},g={class:"pagination"},m={class:"pagination__items"},h={class:"pagination__controls"},P=c((()=>(0,o._)("div",{class:"pagination__text"},"Выводить на странице:",-1))),y={class:"observer"};function v(e,t,a,s,i,r){const l=(0,o.up)("my-button"),p=(0,o.up)("my-select");return(0,o.wg)(),(0,o.iD)("div",d,[(0,o.wy)((0,o._)("div",g,[(0,o._)("div",m,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.pagination.max,(t=>((0,o.wg)(),(0,o.j4)(l,{key:t,class:(0,u.C_)(["pagination__item",{current:t==a.pagination.current}]),onClick:a=>e.$emit("changePage",t)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(t),1)])),_:2},1032,["class","onClick"])))),128)),(0,o._)("div",h,[P,(0,o.Wm)(p,{onChange:t[0]||(t[0]=t=>e.$emit("changePerPage",i.perPage)),modelValue:i.perPage,"onUpdate:modelValue":t[1]||(t[1]=e=>i.perPage=e),options:i.perPageValues,defaultOption:!1},null,8,["modelValue","options"])])]),"by page"==a.pagination.type?((0,o.wg)(),(0,o.j4)(l,{key:0,onClick:t[2]||(t[2]=t=>e.$emit("changePaginationType")),class:"pagination__load-more"},{default:(0,o.w5)((()=>[(0,o.Uk)("Показать больше")])),_:1})):(0,o.kq)("",!0),(0,o.wy)((0,o._)("div",y,null,512),[[n.F8,"endless tape"==a.pagination.type]])],512),[[n.F8,a.pagination.max>0]])],512)}var f=a(2718),_=a(9422),w=a(4870),b={components:{MySelect:_.Z,MyButton:f.Z},data(){return{perPageValues:[{value:"10",name:"10"},{value:"15",name:"15"},{value:"20",name:"20"},{value:"25",name:"25"},{value:"30",name:"30"},{value:"40",name:"40"},{value:"50",name:"50"}],perPage:"10"}},emits:["changePage","changePerPage","changePaginationType"],props:{pagination:{type:Object,required:!0}},setup(){const e=(0,w.iH)(null);return{root:e}},computed:{paginationType(){return this.pagination.type}},watch:{paginationType(e){const t={rootMargin:"0px",threshold:1},a=(e,t)=>{e[0].isIntersecting&&this.pagination.current<this.pagination.max&&this.$emit("changePage","loadMore")},o=new IntersectionObserver(a,t);"endless tape"==e?o.observe(this.root.querySelector(".observer")):o.disconnect()}}},k=a(89);const C=(0,k.Z)(b,[["render",v],["__scopeId","data-v-9f708c64"]]);var T=C,V={emits:["removePost","changePage","changePerPage","changePaginationType"],components:{PostItem:p.Z,MyPagination:T},props:{posts:{type:Array,required:!0},pagination:{type:Object,required:!1},isLoading:{type:Boolean,default:!1}},data(){return{flag:!1}}};const L=(0,k.Z)(V,[["render",l],["__scopeId","data-v-4a134daa"]]);var M=L},5765:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var o=a(3396);const n=e=>((0,o.dD)("data-v-4a8bda46"),e=e(),(0,o.Cn)(),e),s={class:"posts-container-header"},i=n((()=>(0,o._)("h1",null,"Список постов",-1)));function r(e,t,a,n,r,l){const p=(0,o.up)("my-button"),u=(0,o.up)("my-input"),c=(0,o.up)("my-select"),d=(0,o.up)("post-list"),g=(0,o.up)("post-form"),m=(0,o.up)("modal-window");return(0,o.wg)(),(0,o.iD)("main",null,[(0,o.Wm)(p,{onClick:t[0]||(t[0]=e=>r.showModal=!0)},{default:(0,o.w5)((()=>[(0,o.Uk)("Создать новый пост")])),_:1}),(0,o.Wm)(u,{modelValue:n.serachQuery,"onUpdate:modelValue":t[1]||(t[1]=e=>n.serachQuery=e),class:"search-input",placeholder:"Поиск..."},null,8,["modelValue"]),(0,o._)("div",s,[i,(0,o.Wm)(c,{modelValue:n.currentSortType,"onUpdate:modelValue":t[2]||(t[2]=e=>n.currentSortType=e),options:r.sortTypes},null,8,["modelValue","options"])]),(0,o.Wm)(d,{onRemovePost:l.removePost,onChangePage:l.changePage,onChangePerPage:l.changePerPage,onChangePaginationType:l.changePaginationType,posts:n.sortedAndSearchedPosts,pagination:n.pagination,isLoading:n.isPostLoading},null,8,["onRemovePost","onChangePage","onChangePerPage","onChangePaginationType","posts","pagination","isLoading"]),r.showModal?((0,o.wg)(),(0,o.j4)(m,{key:0,onCloseModal:t[3]||(t[3]=e=>r.showModal=!1)},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{onCreate:l.createPost},null,8,["onCreate"])])),_:1})):(0,o.kq)("",!0)])}a(7658);var l=a(9944),p=a(2868),u=a(4311),c=a(4870);function d(){let e=(0,c.iH)(!0),t=(0,c.iH)([]),a=(0,c.iH)({current:1,max:0,type:"by page",posts:{perPage:10,total:0}});const n=async()=>{try{"by page"===a.type&&(t.value=[],e.value=!0);const o=await u.Z.get("https://jsonplaceholder.typicode.com/posts",{params:{_limit:a.value.posts.perPage,_page:a.value.current}});"by page"===a.value.type?t.value=o.data:t.value=[...t.value,...o.data],a.value.posts.total=+o.headers["x-total-count"],a.value.max=Math.ceil(a.value.posts.total/a.value.posts.perPage)}catch(o){console.error(o)}finally{e.value=!1}};return(0,o.bv)(n),{fetchPosts:n,isPostLoading:e,posts:t,pagination:a}}function g(e){const t=(0,c.iH)("id"),a=(0,o.Fl)((()=>t.value?[...e.value].sort(((e,a)=>e[t.value]>a[t.value]?1:-1)):[...e.value]));return{currentSortType:t,sortedPosts:a}}function m(e){const t=(0,c.iH)(""),a=(0,o.Fl)((()=>t.value?e.value.filter((e=>e.title.toLowerCase().includes(t.value.toLowerCase()))):e.value));return{sortedAndSearchedPosts:a,serachQuery:t}}var h={components:{PostList:p.Z,PostForm:l.Z},data(){return{showModal:!1,sortTypes:[{value:"title",name:"По названию"},{value:"body",name:"По содержанию"},{value:"id",name:"По идентификатору"}]}},methods:{createPost(e){this.posts.push(e),this.showModal=!1},removePost(e){this.posts=this.posts.filter((t=>t.id!=e.id))},changePage(e){"loadMore"!=e?(this.pagination.type="by page",this.pagination.current=+e):(this.pagination.type="endless tape",this.pagination.current++),this.fetchPosts()},changePerPage(e){this.pagination.type="by page",this.pagination.posts.perPage=+e,this.pagination.current=1,this.fetchPosts()},changePaginationType(){this.pagination.type="endless tape"}},computed:{},mounted(){},setup(e){let{fetchPosts:t,isPostLoading:a,posts:o,pagination:n}=d(),{currentSortType:s,sortedPosts:i}=g(o),{sortedAndSearchedPosts:r,serachQuery:l}=m(i);return{fetchPosts:t,isPostLoading:a,posts:o,pagination:n,currentSortType:s,sortedPosts:i,sortedAndSearchedPosts:r,serachQuery:l}}},P=a(89);const y=(0,P.Z)(h,[["render",r],["__scopeId","data-v-4a8bda46"]]);var v=y}}]);