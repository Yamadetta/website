let inputField=document.querySelector(".input-field > input"),taskList=document.querySelectorAll(".task"),tasklisttest=document.getElementsByClassName("task"),localStorageTransit={localStoragetoDoList:{coordinates:{},tasks:[]},localStorageNotes:{}};document.querySelector(".input-field__plus").addEventListener("click",createTask),inputField.addEventListener("keydown",(function(e){"Enter"==e.key&&createTask()})),document.querySelector(".input-field__clear-all").addEventListener("click",clearAll),getTheDataLocalStorage(),emptyMessage(),setEventListenerArr();let scrollToTopTimer=setInterval((()=>{scrollToTop()}),100);function createTask(){if(inputField.style.backgroundColor="",inputField.style.borderColor="",inputField.placeholder="Добавить задачу",""!=inputField.value){let e=document.createElement("div");e.classList="task";let t=document.createElement("span");t.textContent=inputField.value,t=t.innerHTML,e.innerHTML=`<div title="Выполнено" class="task__checkbox-wrapper">\n <div class="task__checkbox">\n <span class="task__checkbox-icon">✓</span></div>\n </div>\n <div class="task__quest">\n <span class="task__quest-text">${t}</span><input type="text" name="" id="edit-input">\n </div>\n <div title="Редактировать" class="task__change-button">\n <img class="change-icon" src="./img/pencil-icon.svg" alt="">\n </div>\n <div title="Удалить" class="task__delete-button"><img class="remove-icon" src="./img/remove-icon.svg" alt=""></div>`,setEventListener(e),document.querySelector(".task-container").appendChild(e),inputField.value="",localStorageRecord(t);let o=document.querySelector(".empty-phrase");tasklisttest.length>0&&null!=o&&(o.remove(),document.querySelector(".task-container").style="")}else inputField.style.backgroundColor="#ff00003b",inputField.style.borderColor="#ff00003b",inputField.placeholder="Вы ничего не ввели",setTimeout((()=>{inputField.style.backgroundColor="",inputField.style.borderColor="",inputField.placeholder="Добавить задачу"}),5e3)}function clearAll(){document.querySelectorAll(".task").forEach((function(e){e.remove()})),localStorage.clear(),localStorageTransit={localStoragetoDoList:{coordinates:{},tasks:[]},localStorageNotes:{}},emptyMessage()}function setEventListenerArr(){taskList=document.querySelectorAll(".task"),taskList.forEach((function(e){setEventListener(e)}))}function emptyMessage(){0===document.querySelectorAll(".task").length&&(document.querySelector(".task-container").innerHTML='<span class="empty-phrase">Здесь пока пусто...</span>',document.querySelector(".task-container").style.textAlign="center")}function getTheDataLocalStorage(){if(null!=localStorage.getItem("localStoragetoDoList")){localStorageTransit={localStoragetoDoList:JSON.parse(localStorage.getItem("localStoragetoDoList")),localStorageNotes:JSON.parse(localStorage.getItem("localStorageNotes"))};for(let e=0;e<localStorageTransit.localStoragetoDoList.tasks.length;e++){let t=localStorageTransit.localStoragetoDoList.tasks[e],o=document.createElement("div");o.classList="task",o.innerHTML=`\n            <div title="Выполнено" class="task__checkbox-wrapper">\n                <div class="task__checkbox">\n                    <span class="task__checkbox-icon">✓</span>\n                </div>\n            </div>\n\n            <div class="task__quest">\n                <span class="task__quest-text">${t.taskContent}</span><input type="text" name="" id="edit-input">\n            </div>\n\n            <div title="Редактировать" class="task__change-button">\n                <img class="change-icon" src="./img/pencil-icon.svg" alt="">\n            </div>\n\n            <div title="Удалить" class="task__delete-button">\n                <img class="remove-icon" src="./img/remove-icon.svg" alt="">\n            </div>`,1==t.ifComplete&&(o.querySelector(".task__checkbox-icon").classList.toggle("task__checkbox-icon_active"),o.querySelector(".task__quest-text").classList.toggle("task__quest-text_active")),document.querySelector(".task-container").appendChild(o)}}}function localStorageRecord(e){localStorageTransit.localStoragetoDoList.tasks.push({taskContent:e,ifComplete:!1}),localStorageReWrite()}function localStorageReWrite(){localStorage.setItem("localStoragetoDoList",JSON.stringify(localStorageTransit.localStoragetoDoList))}function dragElement(e){var t=0,o=0,l=0,n=0;function a(e){(e=e||window.event).preventDefault(),l=e.clientX,n=e.clientY,document.onmouseup=c,document.onmousemove=s}function s(a){(a=a||window.event).preventDefault(),t=l-a.clientX,o=n-a.clientY,l=a.clientX,n=a.clientY,e.style.top=e.offsetTop-o+"px",e.style.left=e.offsetLeft-t+"px"}function c(){document.onmouseup=null,document.onmousemove=null}document.getElementById(e.id+"header")?document.getElementById(e.id+"header").onmousedown=a:e.onmousedown=a}function setEventListener(e){e.addEventListener("click",(function(e){let t=Array.prototype.indexOf.call(tasklisttest,this);if("remove-icon"==e.target.className)localStorageTransit.localStoragetoDoList.tasks.splice(t,1),localStorageReWrite(),this.remove(),0==localStorageTransit.localStoragetoDoList.tasks.length&&emptyMessage();else if("task__checkbox-icon"==e.target.classList||"task__checkbox-icon task__checkbox-icon_active"==e.target.classList)this.querySelector(".task__checkbox-icon").classList.toggle("task__checkbox-icon_active"),this.querySelector(".task__quest-text").classList.toggle("task__quest-text_active"),1==localStorageTransit.localStoragetoDoList.tasks[t].ifComplete?localStorageTransit.localStoragetoDoList.tasks[t].ifComplete=!1:localStorageTransit.localStoragetoDoList.tasks[t].ifComplete=!0,localStorageReWrite();else if("change-icon"==e.target.className){let e=this.querySelector("#edit-input"),o=this.querySelector(".task__quest-text");o.style.color="#ffffff00",e.style.display="block",e.value=o.innerHTML,e.addEventListener("keydown",(function(l){if("Enter"==l.key){let l=document.createElement("span");l.textContent=e.value,l=l.innerHTML,o.innerHTML=`${l}<input type="text" name="" id="edit-input">`,localStorageTransit.localStoragetoDoList.tasks[t].taskContent=l,localStorageReWrite(),o.style.color="",e.style.display="none"}}))}}))}function scrollToTop(){document.documentElement.scrollTop=0,document.body.scrollTop=0}function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function addImgInCounter(){let e=document.createElement("img");e.className="delete-after-render",e.style.display="none","webp"==document.querySelector("body").className?e.src="./img/background.webp":e.src="./img/background.jpg",document.querySelector(".page").after(e),document.querySelector(".page").style.backgroundImage=`url('${document.querySelector(".delete-after-render").src}')`}function preloader(){let e=document.images,t=e.length,o=0,l=document.querySelector(".preload-percentage");for(let t=0;t<e.length;t++){let o=document.createElement("img");o.src=e[t].src,o.onload=n,o.onerror=n}function n(){o++,l.innerHTML=(100/t*o<<0)+"%",o>=t&&(window.onload=()=>setTimeout((()=>{let e=document.querySelector(".block");e.classList.contains("done")||e.classList.add("done"),document.querySelector(".delete-after-render").remove(),window.innerWidth<=768&&document.querySelector("body").classList.add("mobile-body")}),1e3))}}window.addEventListener("load",(()=>{setTimeout((()=>{clearInterval(scrollToTopTimer)}),1e3)}),{once:"true"}),dragElement(document.getElementById("mydiv")),testWebP((function(e){1==e?(document.querySelector("body").classList.add("webp"),addImgInCounter(),preloader()):(document.querySelector("body").classList.add("no-webp"),addImgInCounter(),preloader())}));